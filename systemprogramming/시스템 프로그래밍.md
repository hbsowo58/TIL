# 시스템 프로그래밍

리눅스 시스템 프로그래밍이란?

라이브 프로그래밍: 준비된 예제 x 빈 파일에서 구현 & 테스트

<br>

파일에 대한 다양한 주제 

hardlink, softlink, 메모리 매핑

<br>

### 실습 환경 구성(가상머신)

PC에 리눅스 설치 OR 가상 머신에 리눅스 설치

<br>

가상머신 : 컴퓨터 안에 또 다른 컴퓨터를 만드는 것 '실제' x 가상 o -> 그래서 가상머신이라고 표현

<br>

시스템 콜이란? (=시스 콜)


<br>

c언어 표준함수 (파일입출력용) read, write append(덧붙이기)

fopen

**두번째 인자**는 아래와 같은 파일을 오픈할 방식을 정할 수 있습니다. (모드 별로 읽기/쓰기 권한 따로임)



**"r" : read mode.** 파일이 존재하면 해당 파일을 열겠다. 읽기 전용으로 열것이다. 그러므로 편집은 못한다. 파일이 존재하지않으면 에러반환.

**“w” : write mode.** 파일이 존재하면 해당 파일을 열겠다. 하지만 안에 무슨 내용이 있던 열어서 편집할것 이고 새로 붙여넣기 할것이다. 만약 파일이 존재하지 않으면 새로 만들것이다.

**“a” :** **append mode.** 파일이 존재하면 해당 파일을 열겠다. 안에 내용이 있으면 맨 뒤에서 부터 편집해서 넣을것이다. 만약 파일이 존재하지 않으면 새로 만들것이다.

**“r+”** **:** **read+ mode.** 파일이 존재하면 해당 파일을 읽고 쓰기 둘다 가능하게 열겠다. 파일이 존재하지 않으면 에러를 반환한다.

**“w+” :** **write+ mode.** 파일이 존재하면 해당 파일을 읽고 쓰기 둘다 가능하게 열겠다. 파일이 존재하지 않으면 새로 만들겠다.

**“a+” :** **append+ mode.** 파일이 존재하면 해당 파일의 맨 끝에서 부터 읽고 쓰기가 둘다 가능하도록 열겠다. 파일이 존재하지 않으면 새로 만들겠다.

<br>

파일포지션 : 커서의 위치

파일 존재시 어떤 처리를 할 것 인가?

<br>

https://blockdmask.tistory.com/392 

<br>

fscanf(서식을 지정하여 파일에서 문자열 읽기)

```
fscanf(fp, "%s %d", s1, &num1);
```

<br>

fopen() -> fscanf() -> fclose() 순의 흐름

<br>

[참고]

fprintf, fscanf 등의 함수의 매개변수에서 파일 포인터 부분을 보면 FILE* const _Stream와 같이 스트림(stream)이라고 되어 있습니다. 보통 파일 포인터를 파일 스트림이라고도 하는데 스트림은 물 등의 액체가 흐르는 것을 뜻합니다. 파이프 속에 물이 계속 흘러다니는 것처럼 파일 스트림도 파일의 데이터를 연속적으로 처리한다고 해서 스트림입니다.

즉, 파일에서 데이터를 처리할 때마다 매번 파일을 여는 것이 아니라 파일 스트림을 한 번 생성해서 계속 데이터를 쓰거나 가져오는 방식이죠. 여기서 fopen으로 파일을 읽기 전용으로 열면 입력 스트림, 쓰기 전용으로 열면 출력 스트림, 읽기/쓰기로 열면 입출력 스트림입니다. 파일 모드에 따라 단방향, 양방향이 되죠. 마찬가지로 stdin은 입력 스트림, stdout, stderr는 출력 스트림입니다.

<br>

데이터를 형식에 맞추어 스트림에 쓴다.

특정한 스트림에 일련의 데이터를 특정한 형식에 맞추어 쓰게 된다. 이 때, 그 형식은 형식 문자열에 지정되어 있으며, 출력할 데이터는 형식 문자열 다음에 오는 인자들에 써주면 된다.

<br>

fclose

```c
int fclose(FILE *stream);
```

파라미터

	- stream : 열린 파일 포인터

반환값

- 성공시 0
- 실패시 EOF







### 프로세스

program : 실행 가능한 코드, 바이너리    -> 파일로 저장

<br>

process 실행중인 프로그램 (하나 ‘이상의’ 쓰레드)

<br>

thread 프로세스 내의 실행단위

가상화된 프로세서, 스택, 레지스터, 명령어 포인터 등 프로세서의 상태 포함

<br>

프로세스 내의 모드 쓰레드는 같은 주소 공간을 공유





----

### IPC 프로그래밍

IPC -> Inter Process Communication

-프로세스간 통신(프로세스들이 데이터를 주고받는 행위 또는 방법, 경로)

<br>

IPC 형태 3가지 분류

1.Data transfer -> 직접 프로세스간 데이터 전송

2.Shared memory -> 메모리 자체를 공유

3.Synchronization -> 동기화(순서,규칙에 맞게 공유된 리소스들을 사용한다)
